<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <title>Document</title>
</head>
<body>
    <h1 class="text-center fw-bolder">오늘 할 일을 내일로 미루지 말자</h1>
    <!-- 할 일 추가 -->
    <div class="container">
        <form action="{% url 'todos:create' %}">
            <div class="input-group flex-nowrap my-3">
                <span class="input-group-text" id="addon-wrapping">할 일</span>
                <input name="content" maxlength ='10' type="text" class="form-control">
            </div>
            <div class="d-grid my-3">
                <select name="priority">
                    <option selected value="select_value">select value</option>
                    <option value=1>1</option>
                    <option value=2>2</option>
                    <option value=3>3</option>
                    <option value=4>4</option>
                    <option value=5>5</option>
                </select>
            </div>
            <div class="d-grid my-3">
                <input name="deadline" type="date">
            </div>
            <div class="d-grid my-3">
                <input class="btn btn-outline-primary" type="submit" value="할 일 추가">
            </div>
        </form>
        <!-- 투두리스트 -->
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th scope="col">우선 순위</th>
                    <th scope="col">할 일</th>
                    <th scope="col">생성 날짜</th>
                    <th scope="col">마감 기한</th>
                    <th scope="col">진행 상태</th>
                    <th scope="col">상태 변경</th>
                    <th scope="col">삭제</th>
                </tr>
            </thead>
            <tbody>
                {% for todo in todos %}
                    <tr>
                        {% if todo.completed == True %}
                            <td><s>{{ todo.priority }}</s></td>
                            <td><s><a class="text-decoration-none" href="{% url 'todos:detail' todo.pk %}">{{ todo.content }}</a></s><a type="button" class="btn btn-sm btn-outline-primary" href="{% url 'todos:edit' todo.pk %}">수정</a></td>
                            <td><s>{{ todo.created_at.year }}년 {{ todo.created_at.month }}월 {{ todo.created_at.day}}일</s></td>

                            {% if todo.deadline == null %}
                                <td><s>None</s></td>
                            {% else %}
                                <td><s>{{ todo.deadline.year }}년 {{ todo.deadline.month }}월 {{ todo.deadline.day}}일</s></td>
                            {% endif %}
                            
                            {% if todo.completed == True %}
                                <td><i class="bi bi-check-square-fill"></i></td>
                            {% else %}
                                <td><i class="bi bi-square"></i></td>
                            {% endif %}
                        {% else %}
                            <td>{{ todo.priority }}</td>
                            <td><a class="text-decoration-none" href="{% url 'todos:detail' todo.pk %}">{{ todo.content }}</a><a type="button" class="btn btn-sm btn-outline-primary" href="{% url 'todos:edit' todo.pk %}">수정</a></td>
                            <td>{{ todo.created_at.year }}년 {{ todo.created_at.month }}월 {{ todo.created_at.day}}일</td>

                            {% if todo.deadline == null %}
                                <td>None</td>
                            {% else %}
                                <td>{{ todo.deadline.year }}년 {{ todo.deadline.month }}월 {{ todo.deadline.day}}일</td>
                            {% endif %}
                            
                            {% if todo.completed == True %}
                                <td><i class="bi bi-check-square-fill"></i></td>
                            {% else %}
                                <td><i class="bi bi-square"></i></td>
                            {% endif %}
                        {% endif %}
                        <td><a type="button" class="btn btn-primary" href="{% url 'todos:update' todo.pk %}">수정</a></td>
                        <td><a type="button" class="btn btn-danger" href="{% url 'todos:delete' todo.pk %}">삭제</a></td>
                    </tr>
                {% endfor %}    
            </tbody>
        </table>
    </div>
   
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
</body>
</html>